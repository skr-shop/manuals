[通用抽奖工具(Glue万能胶)](http://skrshop.tech/#/?id=%25e9%2580%259a%25e7%2594%25a8%25e6%258a%25bd%25e5%25a5%2596%25e5%25b7%25a5%25e5%2585%25b7glue%25e4%25b8%2587%25e8%2583%25bd%25e8%2583%25b6)一文对抽奖需求进行了简要的分析。

这里跳出来抽奖需求，只对抽奖的形式进行分析。

抽奖形式目前看来分为以下两类：

1. 【独立开奖】从箱子里拿出一张奖券，上面写着 =XX洗衣机一台= 或者 =谢谢惠顾= ，可以立即获得抽奖结果。

2. 【统一开奖】每个人发一个号码，在某个时间段公布中奖号码，拿到该号码的人则为中奖者。

# 独立开奖

独立开奖最重要的内容自然是每次抽奖后的中奖内容。那么什么时间、如何生成中奖信息便是重点。

## 保证整场活动的中奖概率

1. 根据准备发放的奖品数量生成列表，并对其进行随机排序，保证每个奖品出现在每个位置的概率相等。空奖也是奖品的一种。
2. 用户每次抽奖的时，只需要从奖堆的顶端拿出一个奖品交给用户即可。

也可以每次抽的时候在奖品余量的范围内进行一次随机，根据随机数在数轴上的位置获得抽中的奖品。
抽中之后对应奖品数量-1。

### 优点
1. 由于所有的抽奖内容都是提前生成好的，所以抽奖的时候效率较高。
2. 可以设置每种奖品的数量，不会存在用户抽到了但没有库存的情况。

### 缺点
1. 当需要准备的奖品数量多的时候，可能需要较长的时间来生成以及较大的空间来保存。
2. 无法做到无限制抽取。因为如果在活动中对奖品数量进行了追加，整场活动的中奖概率便可能会发生变化。

## 保证单次抽奖的中奖概率
1. 设置奖品获奖概率。
2. 在获奖概率范围内生成一个随机数，根据随机数在数轴上的位置获得抽中的奖品。

### 优点
1. 中奖概率稳定。
2. 可以发放无数的奖品，奖品库存数量变化也不会导致概率变化。

### 缺点
1. 可能会超发。因为每次抽奖都是一个独立的事件。在每个独立事件发生概率为1/10的前提下，连续N次中每次该事件都发生的概率为10的N次方分之一。

# 统一开奖

【统一开奖】方式的重点在于如何 **客观** **公正** **第三方** 的生成中奖的N个号码。

假定我们的彩票号码是从0开始到N的连续数字（非此类情况则需要一个可以将生成数字转化为彩票号码的转化函数）。

在开奖时生成M个号码作为中奖号码。

## 如何生成M个号码

常见方式是使用随机函数进行生成。

## 如何让生成结果可被复查

随机函数一般都是伪随机，实际上是一连串由随机数种子决定的数字。当种子一定时，随机数列便是恒定的。

那么如果想要结果可被宠复查，只需要记录随机数生成器的种子即可。

## 如何让生成结果不可预测

只要随机数生成器的种子是不可预测的，则生成出来的数列变是不可预测的。

具体的实践方法有很多，例如使用当天某某报纸的头条的处理值作为种子，或者使用某个时间点后区块链上产生的第一个新块的值。这些值都是公开且不可预知的。

## 如何提升人为干预结果的难度

实际上这个需要参考具体的成本。种子越难提前预测，难度越高。

例如开奖时间的时间戳很容易获得，而未来某个时间后的第一个区块链的哈希值却很难预测。
